var _0x2cf9=['Enter\x20your\x20name','Enter\x20room\x20name','Waiting\x20for\x20other','player','Click\x20to\x20start','undefined','getmoves','getwinner','length','slice','getElementById','game','getContext','ctx','height','strokeStyle','addEventListener','click','clickHandler','evt','block','winner','figx','ding','blip.mp3','play','deinit','removeEventListener','send','stringify','ping','pong','sync','playing','turn','synchronize','forEach','getrect','check','splice','indexOf','draw','start','width','clearRect','beginPath','moveTo','lineTo','arc','stroke','#ff0000','#ffffff','pageX','pageY','clientX','body','documentElement','scrollLeft','clientY','scrollTop','offsetLeft','offsetTop','push','log','Starting\x20Game\x20Manager','curr','font','30px\x20Bowlby\x20One\x20SC','extBaseline','fillStyle','_name_entering','_name','_room','ready','err','Connecting','entering','waiting','key','match','Backspace','_room_entering','substr','Enter','connect','toUpperCase','wss://tiktaktoe.openode.io','onmessage','parse','data','handlemsg','onopen','Connecting\x20with\x20name\x20','setname','Joining\x20room\x20','join','onclose','Could\x20not\x20connect.','newgame','Creating\x20new\x20board\x20and\x20starting\x20game.','nmm','fillText','No\x20more\x20moves','Tie','Winner:\x20'];(function(_0x26d387,_0x13694d){var _0x4d3f09=function(_0x125a95){while(--_0x125a95){_0x26d387['push'](_0x26d387['shift']());}};_0x4d3f09(++_0x13694d);}(_0x2cf9,0x6e));var _0x5108=function(_0x242f61,_0x3ec68d){_0x242f61=_0x242f61-0x0;var _0x501ae2=_0x2cf9[_0x242f61];return _0x501ae2;};class Board{constructor(_0x501e82){if(typeof _0x501e82!==_0x5108('0x0')){this['p']=_0x501e82;}else{this['p']=[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}}['copy'](){return new Board(this['p']['slice']());}['check'](_0x11657b,_0x26c666){if(this['p'][_0x11657b]==0x0){this['p'][_0x11657b]=_0x26c666?0x2:0x1;}else return!![];}[_0x5108('0x1')](){var _0x4cbc11=[];for(var _0x425aa0=0x0;_0x425aa0<this['p']['length'];_0x425aa0++){if(this['p'][_0x425aa0]===0x0)_0x4cbc11['push'](_0x425aa0);}return _0x4cbc11;}[_0x5108('0x2')](){var _0x46f3fa=_0x44b31e=>{var _0x58157c=_0x44b31e[0x0];for(var _0x1d33e=0x1;_0x1d33e<_0x44b31e[_0x5108('0x3')];_0x1d33e++){if(_0x44b31e[_0x1d33e]!=_0x58157c){return![];}}return _0x58157c;};for(var _0x4880bf=0x0;_0x4880bf<0x3;_0x4880bf++){var _0x5f7f12=_0x46f3fa(this['p'][_0x5108('0x4')](_0x4880bf*0x3,_0x4880bf*0x3+0x3));if(_0x5f7f12)return _0x5f7f12;var _0x2a1a7e=_0x46f3fa([this['p'][_0x4880bf],this['p'][0x3+_0x4880bf],this['p'][0x2*0x3+_0x4880bf]]);if(_0x2a1a7e)return _0x2a1a7e;}var _0x3717e1=_0x46f3fa([this['p'][0x0],this['p'][0x4],this['p'][0x8]]);if(_0x3717e1)return _0x3717e1;var _0xfdf934=_0x46f3fa([this['p'][0x2],this['p'][0x4],this['p'][0x6]]);if(_0xfdf934)return _0xfdf934;return-0x1;}}class Game{constructor(_0x545a97,_0x3d5629){this['b']=new Board();this['playing']=!![];this['c']=document[_0x5108('0x5')](_0x5108('0x6'));this['ctx']=this['c'][_0x5108('0x7')]('2d');this['ctx']['width']=this['c']['width'];this[_0x5108('0x8')][_0x5108('0x9')]=this['c']['height'];this[_0x5108('0x8')][_0x5108('0xa')]='#ffffff';this['c'][_0x5108('0xb')](_0x5108('0xc'),_0x2f399b=>{this[_0x5108('0xd')](_0x2f399b);},![]);this[_0x5108('0xe')]=[];this[_0x5108('0xf')]=![];this[_0x5108('0x10')]=-0x1;this['ws']=_0x545a97;this['turn']=![];this[_0x5108('0x11')]=_0x3d5629;}[_0x5108('0x12')](){var _0x1cf309=new Audio(_0x5108('0x13'));_0x1cf309[_0x5108('0x14')]();}[_0x5108('0x15')](){this['c'][_0x5108('0x16')](_0x5108('0xc'),this['clickHandler']);}[_0x5108('0x17')](_0x11faf5,_0x3b001e){this['ws'][_0x5108('0x17')](JSON[_0x5108('0x18')](_0x11faf5));if(typeof _0x3b001e!=='undefined')_0x3b001e();}['handlemsg'](_0x138bc0){if(typeof _0x138bc0[_0x5108('0x19')]!=='undefined'){return this[_0x5108('0x17')]({'action':_0x5108('0x1a')});}else if(typeof _0x138bc0[_0x5108('0x1b')]!==_0x5108('0x0')){this[_0x5108('0x1c')]=_0x138bc0[_0x5108('0x1b')][_0x5108('0x1c')];this[_0x5108('0xf')]=_0x138bc0[_0x5108('0x1b')][_0x5108('0xf')];this[_0x5108('0x10')]=_0x138bc0[_0x5108('0x1b')][_0x5108('0x10')];this['b']['p']=_0x138bc0[_0x5108('0x1b')]['p'];if(this[_0x5108('0x1c')])return this['ml']();}else if(typeof _0x138bc0[_0x5108('0x1d')]!=='undefined'){this[_0x5108('0x1d')]=!![];}}[_0x5108('0x1e')](){this[_0x5108('0x17')]({'action':_0x5108('0x1b')});}['start'](){this[_0x5108('0x1e')]();}['ml'](){var _0x385687=this['evt'][_0x5108('0x3')];this[_0x5108('0xe')][_0x5108('0x1f')](_0x129ce5=>{if(this['b']['p'][this[_0x5108('0x20')](_0x129ce5['x'],_0x129ce5['y'])]===0x0&&this['turn']){this['send']({'action':_0x5108('0x21'),'r':this['getrect'](_0x129ce5['x'],_0x129ce5['y'])});this[_0x5108('0x1d')]=![];this['ding']();}this[_0x5108('0xe')][_0x5108('0x22')](this[_0x5108('0xe')][_0x5108('0x23')](_0x129ce5),0x1);});this[_0x5108('0x24')]();if(!this[_0x5108('0x1c')]){this[_0x5108('0x15')]();}else setTimeout(()=>{this[_0x5108('0x25')]();},0x28);}[_0x5108('0x20')](_0x361bfa,_0x1127f8){for(var _0x11a4fa=0x1;_0x11a4fa<=0x3;_0x11a4fa++)for(var _0x3ad507=0x1;_0x3ad507<=0x3;_0x3ad507++){var _0x528582=this[_0x5108('0x8')]['width']/0x3*(_0x3ad507-0x1);var _0x2ef875=this[_0x5108('0x8')][_0x5108('0x9')]/0x3*(_0x11a4fa-0x1);var _0x4d6b57=this[_0x5108('0x8')][_0x5108('0x26')]/0x3*_0x3ad507;var _0x39b50b=this[_0x5108('0x8')]['height']/0x3*_0x11a4fa;if(_0x361bfa>=_0x528582&&_0x1127f8>=_0x2ef875&&_0x361bfa<=_0x4d6b57&&_0x1127f8<=_0x39b50b){return(_0x11a4fa-0x1)*0x3+(_0x3ad507-0x1);}}}['draw'](){this[_0x5108('0x8')][_0x5108('0x27')](0x0,0x0,this['ctx']['width'],this[_0x5108('0x8')][_0x5108('0x9')]);this['ctx'][_0x5108('0xa')]='#ffffff';this[_0x5108('0x8')][_0x5108('0x28')]();this['ctx'][_0x5108('0x29')](this[_0x5108('0x8')]['width']/0x3,0x0);this[_0x5108('0x8')][_0x5108('0x2a')](this[_0x5108('0x8')]['width']/0x3,this[_0x5108('0x8')]['width']);this['ctx'][_0x5108('0x29')](this['ctx'][_0x5108('0x26')]/0x3*0x2,0x0);this['ctx'][_0x5108('0x2a')](this[_0x5108('0x8')][_0x5108('0x26')]/0x3*0x2,this[_0x5108('0x8')][_0x5108('0x26')]);this[_0x5108('0x8')][_0x5108('0x29')](0x0,this[_0x5108('0x8')][_0x5108('0x9')]/0x3);this['ctx'][_0x5108('0x2a')](this[_0x5108('0x8')]['height'],this[_0x5108('0x8')][_0x5108('0x9')]/0x3);this[_0x5108('0x8')][_0x5108('0x29')](0x0,this[_0x5108('0x8')][_0x5108('0x9')]/0x3*0x2);this['ctx'][_0x5108('0x2a')](this[_0x5108('0x8')]['height'],this['ctx']['height']/0x3*0x2);for(var _0x12d9f2=0x0;_0x12d9f2<0x3;_0x12d9f2++)for(var _0x5c569e=0x0;_0x5c569e<0x3;_0x5c569e++){var _0x9b5eaf=this['b']['p'][_0x12d9f2*0x3+_0x5c569e];var _0x1f9631=0x42+this[_0x5108('0x8')][_0x5108('0x26')]/0x3*_0x5c569e;var _0x1b2c80=0x42+this[_0x5108('0x8')][_0x5108('0x9')]/0x3*_0x12d9f2;if(_0x9b5eaf==0x1){this[_0x5108('0x8')][_0x5108('0x29')](_0x1f9631+0x28,_0x1b2c80);this[_0x5108('0x8')][_0x5108('0x2b')](_0x1f9631,_0x1b2c80,0x28,0x0,0x2*Math['PI']);}else if(_0x9b5eaf==0x2){this[_0x5108('0x8')][_0x5108('0x29')](_0x1f9631-0x28,_0x1b2c80-0x28);this['ctx'][_0x5108('0x2a')](_0x1f9631+0x28,_0x1b2c80+0x28);this[_0x5108('0x8')][_0x5108('0x29')](_0x1f9631+0x28,_0x1b2c80-0x28);this[_0x5108('0x8')]['lineTo'](_0x1f9631-0x28,_0x1b2c80+0x28);}}var _0x7de536=this['ctx'][_0x5108('0x26')]/0x2;var _0x55c43d=this['ctx'][_0x5108('0x9')]-0xd;if(!this['figx']){this[_0x5108('0x8')][_0x5108('0x29')](_0x7de536+0xa,_0x55c43d);this[_0x5108('0x8')][_0x5108('0x2b')](_0x7de536,_0x55c43d,0xa,0x0,0x2*Math['PI']);}else{this[_0x5108('0x8')][_0x5108('0x29')](_0x7de536-0xa,_0x55c43d-0xa);this['ctx'][_0x5108('0x2a')](_0x7de536+0xa,_0x55c43d+0xa);this[_0x5108('0x8')]['moveTo'](_0x7de536+0xa,_0x55c43d-0xa);this[_0x5108('0x8')][_0x5108('0x2a')](_0x7de536-0xa,_0x55c43d+0xa);}this[_0x5108('0x8')][_0x5108('0x2c')]();var _0x34a9ae=this[_0x5108('0x8')][_0x5108('0x26')]-0x2d;var _0x17cc42=0xd;if(!this[_0x5108('0x11')]&&this[_0x5108('0x1d')]||this[_0x5108('0x11')]&&!this[_0x5108('0x1d')])this[_0x5108('0x8')][_0x5108('0xa')]=_0x5108('0x2d');this[_0x5108('0x8')]['beginPath']();this[_0x5108('0x8')][_0x5108('0x29')](_0x34a9ae+0xa,_0x17cc42);this[_0x5108('0x8')]['arc'](_0x34a9ae,_0x17cc42,0xa,0x0,0x2*Math['PI']);this[_0x5108('0x8')]['stroke']();if(!this[_0x5108('0x11')]&&!this[_0x5108('0x1d')]||this['figx']&&this['turn'])this[_0x5108('0x8')]['strokeStyle']=_0x5108('0x2d');else this[_0x5108('0x8')][_0x5108('0xa')]=_0x5108('0x2e');this[_0x5108('0x8')][_0x5108('0x28')]();this[_0x5108('0x8')]['moveTo'](_0x34a9ae+0x17-0xa,_0x17cc42-0xa);this[_0x5108('0x8')][_0x5108('0x2a')](_0x34a9ae+0x17+0xa,_0x17cc42+0xa);this[_0x5108('0x8')][_0x5108('0x29')](_0x34a9ae+0x17+0xa,_0x17cc42-0xa);this[_0x5108('0x8')][_0x5108('0x2a')](_0x34a9ae+0x17-0xa,_0x17cc42+0xa);this[_0x5108('0x8')][_0x5108('0x2c')]();}[_0x5108('0xd')](_0x45cca5){if(!this[_0x5108('0x1c')]||this[_0x5108('0xf')]){return;}var _0x5c3c75={};if(_0x45cca5[_0x5108('0x2f')]||_0x45cca5['pageY']){_0x5c3c75['x']=_0x45cca5[_0x5108('0x2f')];_0x5c3c75['y']=_0x45cca5[_0x5108('0x30')];}else{_0x5c3c75['x']=_0x45cca5[_0x5108('0x31')]+document[_0x5108('0x32')]['scrollLeft']+document[_0x5108('0x33')][_0x5108('0x34')];_0x5c3c75['y']=_0x45cca5[_0x5108('0x35')]+document[_0x5108('0x32')][_0x5108('0x36')]+document[_0x5108('0x33')][_0x5108('0x36')];}_0x5c3c75['x']-=this['c'][_0x5108('0x37')];_0x5c3c75['y']-=this['c'][_0x5108('0x38')];this[_0x5108('0xe')][_0x5108('0x39')](_0x5c3c75);}}class GameManager{constructor(){console[_0x5108('0x3a')](_0x5108('0x3b'));this[_0x5108('0x3c')]=null;this['c']=document['getElementById'](_0x5108('0x6'));this[_0x5108('0x8')]=this['c'][_0x5108('0x7')]('2d');this['ctx'][_0x5108('0x3d')]=_0x5108('0x3e');this[_0x5108('0x8')]['textAlign']='center';this[_0x5108('0x8')][_0x5108('0x3f')]='middle';this['ctx'][_0x5108('0x40')]='#afafaf';this[_0x5108('0x41')]=!![];this['_room_entering']=![];this[_0x5108('0x42')]='';this[_0x5108('0x43')]='';this[_0x5108('0x44')]=![];this['waiting']=![];this[_0x5108('0x45')]=_0x5108('0x46');this['c'][_0x5108('0xb')]('click',_0x16b4fd=>{if(this[_0x5108('0x1c')]()||this[_0x5108('0x47')]()||!this[_0x5108('0x44')]||this['waiting'])return;else{this[_0x5108('0x48')]=!![];this['ws'][_0x5108('0x17')](JSON[_0x5108('0x18')]({'action':'start'}));}});document[_0x5108('0xb')]('keydown',_0x485e3c=>{if(!_0x485e3c[_0x5108('0x49')][_0x5108('0x4a')](/[^0-9a-z]/i)&&_0x485e3c[_0x5108('0x49')]!=='OS'){if(this[_0x5108('0x47')]()){if(_0x485e3c[_0x5108('0x49')]===_0x5108('0x4b')){if(this['_name_entering'])this['_name']=this['_name']['substr'](0x0,this[_0x5108('0x42')][_0x5108('0x3')]-0x1);else if(this[_0x5108('0x4c')])this['_room']=this['_room'][_0x5108('0x4d')](0x0,this[_0x5108('0x43')][_0x5108('0x3')]-0x1);}else if(_0x485e3c[_0x5108('0x49')]===_0x5108('0x4e')){if(this[_0x5108('0x41')]){if(this[_0x5108('0x42')]==='')return;this['_name_entering']=![];this[_0x5108('0x4c')]=!![];}else if(this[_0x5108('0x4c')]){if(this['_room']==='')return;this[_0x5108('0x4c')]=![];this[_0x5108('0x4f')]();}}else if(!_0x485e3c[_0x5108('0x49')][_0x5108('0x4a')](/[^0-9]/i)||_0x485e3c[_0x5108('0x49')][0x0]!==_0x485e3c[_0x5108('0x49')][0x0][_0x5108('0x50')]()){if(this[_0x5108('0x41')]&&this['_name'][_0x5108('0x3')]<=0x10)this[_0x5108('0x42')]+=_0x485e3c[_0x5108('0x49')];else if(this[_0x5108('0x4c')]&&this[_0x5108('0x43')][_0x5108('0x3')]<=0x10)this[_0x5108('0x43')]+=_0x485e3c[_0x5108('0x49')];}}}});this['sw']=![];this[_0x5108('0x21')]();}[_0x5108('0x4f')](){this['ws']=new WebSocket(_0x5108('0x51'));this['ws'][_0x5108('0x52')]=_0x453191=>{var _0x149d34=JSON[_0x5108('0x53')](_0x453191[_0x5108('0x54')]);if(typeof _0x149d34['e']!==_0x5108('0x0'))return console[_0x5108('0x3a')](_0x149d34['e']);else if(typeof _0x149d34[_0x5108('0x25')]!==_0x5108('0x0')){this[_0x5108('0x48')]=![];return this['newgame'](_0x149d34['x']);}if(this[_0x5108('0x3c')]!==null)this[_0x5108('0x3c')][_0x5108('0x55')](_0x149d34);};this['ws'][_0x5108('0x56')]=()=>{console[_0x5108('0x3a')](_0x5108('0x57')+this[_0x5108('0x42')]);this['ws'][_0x5108('0x17')](JSON['stringify']({'action':_0x5108('0x58'),'name':this['_name']}));console[_0x5108('0x3a')](_0x5108('0x59')+this[_0x5108('0x43')]);this['ws']['send'](JSON[_0x5108('0x18')]({'action':_0x5108('0x5a'),'name':this[_0x5108('0x43')]}));this['ready']=!![];};this['ws'][_0x5108('0x5b')]=_0x4b8084=>{this[_0x5108('0x45')]=_0x5108('0x5c');};}[_0x5108('0x47')](){return this[_0x5108('0x4c')]||this['_name_entering'];}[_0x5108('0x1c')](){if(this[_0x5108('0x3c')]!==null)if(this[_0x5108('0x3c')][_0x5108('0x1c')])return!![];return![];}[_0x5108('0x5d')](_0xb9f589){console[_0x5108('0x3a')](_0x5108('0x5e'));this[_0x5108('0x3c')]=new Game(this['ws'],_0xb9f589);this[_0x5108('0x3c')][_0x5108('0x25')]();}[_0x5108('0x21')](){if(this[_0x5108('0x3c')]!==null){if(this[_0x5108('0x3c')][_0x5108('0x1c')]||this['sw']){setTimeout(()=>{this[_0x5108('0x21')]();},this[_0x5108('0x47')]()?0x32:0x258);return;}if(this[_0x5108('0x3c')][_0x5108('0x10')]!==null){this['sw']=!![];this[_0x5108('0x8')][_0x5108('0x27')](0x0,0x0,this['c'][_0x5108('0x26')],this['c'][_0x5108('0x9')]);this[_0x5108('0x8')][_0x5108('0x28')]();if(this[_0x5108('0x5f')]){this[_0x5108('0x8')][_0x5108('0x60')](_0x5108('0x61'),this['c'][_0x5108('0x26')]/0x2,this['c']['height']/0x2);}else if(this[_0x5108('0x3c')]['winner']==-0x1){this['ctx'][_0x5108('0x60')](_0x5108('0x62'),this['c']['width']/0x2,this['c'][_0x5108('0x9')]/0x2);}else{var _0x44dda2=this[_0x5108('0x3c')][_0x5108('0x10')]==0x1?'O':'X';this[_0x5108('0x8')][_0x5108('0x60')](_0x5108('0x63')+_0x44dda2,this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2);}setTimeout(()=>{this[_0x5108('0x3c')][_0x5108('0x10')]=null;this['sw']=![];},0x7d0);setTimeout(()=>{this['check']();},this[_0x5108('0x47')]()?0x32:0x258);return;}}this[_0x5108('0x8')][_0x5108('0x27')](0x0,0x0,this['c']['width'],this['c'][_0x5108('0x9')]);this[_0x5108('0x8')][_0x5108('0x28')]();if(this['_name_entering']){this[_0x5108('0x8')]['fillText'](_0x5108('0x64'),this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2-0x32);this[_0x5108('0x8')][_0x5108('0x60')](this[_0x5108('0x42')],this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2);}else if(this['_room_entering']){this[_0x5108('0x8')]['fillText'](_0x5108('0x65'),this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2-0x32);this[_0x5108('0x8')]['fillText'](this[_0x5108('0x43')],this['c']['width']/0x2,this['c']['height']/0x2);}else if(!this[_0x5108('0x44')])this[_0x5108('0x8')]['fillText'](this[_0x5108('0x45')],this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2);else if(this[_0x5108('0x48')]){this[_0x5108('0x8')]['fillText'](_0x5108('0x66'),this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2-0x19);this[_0x5108('0x8')][_0x5108('0x60')](_0x5108('0x67'),this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2+0x19);}else this[_0x5108('0x8')]['fillText'](_0x5108('0x68'),this['c'][_0x5108('0x26')]/0x2,this['c'][_0x5108('0x9')]/0x2);setTimeout(()=>{this[_0x5108('0x21')]();},this[_0x5108('0x47')]()?0x32:0x258);}}
